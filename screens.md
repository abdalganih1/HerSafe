بناءً على متطلبات التطبيق (HerSafe) وقاعدة البيانات التي صممناها، ستحتاج إلى **حوالي 10 إلى 12 واجهة (Activity/Fragment)** لتغطية دورة حياة المستخدم كاملة من التسجيل إلى الطوارئ.

إليك خطة العمل التفصيلية للواجهات الأمامية وتخطيط محتوى كل واجهة بصيغة عناصر XML:

---

### **أولاً: واجهات التوثيق والدخول (Authentication)**

#### **1. واجهة البداية (Splash Screen)**
*   **الهدف:** شاشة ترحيبية تظهر شعار التطبيق أثناء تحميل البيانات الأساسية.
*   **التخطيط (XML Layout):** `ConstraintLayout`
    *   `ImageView`: شعار التطبيق (Logo) في المنتصف.
    *   `TextView`: اسم التطبيق "HerSafe" وشعار نصي (Slogan) "أمانك.. أولويتنا".
    *   `ProgressBar`: مؤشر تحميل دائري صغير في الأسفل.

#### **2. واجهة تسجيل الدخول (Login Activity)**
*   **الهدف:** دخول المستخدم المسجل.
*   **التخطيط (XML Layout):** `LinearLayout` (Vertical)
    *   `ImageView`: شعار صغير في الأعلى.
    *   `TextInputLayout/EditText`: إدخال "اسم المستخدم" أو "رقم الهاتف".
    *   `TextInputLayout/EditText`: إدخال "كلمة المرور" (نوع inputType=textPassword).
    *   `Button`: زر "تسجيل الدخول".
    *   `TextView`: رابط "نسيت كلمة المرور؟".
    *   `TextView`: رابط "ليس لديك حساب؟ إنشاء حساب جديد".

#### **3. واجهة إنشاء حساب جديد (Registration Activity)**
*   **الهدف:** جمع البيانات الكثيرة التي حددناها في قاعدة البيانات.
*   **التخطيط (XML Layout):** `ScrollView` (ضروري لأن الحقول كثيرة) بداخله `LinearLayout`.
    *   **قسم البيانات الشخصية:**
        *   `EditText`: الاسم الأول.
        *   `EditText`: الاسم الأخير.
        *   `EditText`: رقم الهاتف (inputType=phone).
        *   `EditText`: البريد الإلكتروني.
        *   `EditText`: تاريخ الميلاد (يفتح DatePicker).
    *   **قسم البيانات الديموغرافية (لأغراض الأمان):**
        *   `RadioGroup`: يحتوي على زرين `RadioButton` (ذكر / أنثى).
        *   `EditText`: مكان الإقامة (السكن).
        *   `EditText`: اسم الأب (للتوثيق).
        *   `EditText`: اسم الأم.
    *   **قسم الأمان:**
        *   `EditText`: كلمة المرور.
        *   `EditText`: تأكيد كلمة المرور.
    *   `Button`: زر "إنشاء الحساب".

#### **4. واجهة التحقق (OTP Verification Activity)**
*   **الهدف:** التحقق من رقم الهاتف.
*   **التخطيط (XML Layout):** `ConstraintLayout`
    *   `TextView`: نص "تم إرسال رمز التحقق إلى الرقم ...".
    *   `PinView` أو 4 `EditText` متجاورة: لإدخال رمز الـ OTP.
    *   `Button`: زر "تحقق".
    *   `TextView`: عداد تنازلي لإعادة الإرسال + زر "إعادة إرسال الرمز".

---

### **ثانياً: الواجهة الرئيسية (Core Functionality)**

#### **5. الواجهة الرئيسية (Main Activity) - Container**
*   **الهدف:** الحاوية التي تضم التبويبات الرئيسية.
*   **التخطيط (XML Layout):** `ConstraintLayout`
    *   `FrameLayout`: حاوية لتبديل الـ Fragments (الصفحات الداخلية).
    *   `BottomNavigationView`: شريط تنقل سفلي يحتوي على أيقونات:
        1.  الرئيسية (الخريطة).
        2.  جهات الاتصال (الطوارئ).
        3.  سجلي (البلاغات السابقة).
        4.  الملف الشخصي.

---

### **ثالثاً: الأقسام الداخلية (Fragments)**

#### **6. شاشة الخريطة والتحكم (Home Fragment) - أهم واجهة**
*   **الهدف:** عرض الموقع الحالي، المناطق الآمنة، وزر الطوارئ السريع.
*   **التخطيط (XML Layout):** `CoordinatorLayout`
    *   `FragmentContainerView`: لعرض خريطة Google Maps (يملأ الشاشة).
    *   **طبقة علوية (Overlay):**
        *   `CardView`: في الأعلى يعرض حالة المنطقة الحالية (مثلاً: "أنت في منطقة آمنة ✅" أو "منطقة تتطلب الحذر ⚠️") بناءً على تحليل الذكاء الاصطناعي.
    *   **طبقة سفلية:**
        *   `FloatingActionButton` (حجم كبير جداً ولونه أحمر): زر **SOS**. عند الضغط الطويل عليه يتم تفعيل الطوارئ.
        *   `Button`: زر "تفعيل وضع الرحلة الآمنة" (Safe Journey Mode).

#### **7. شاشة جهات الاتصال (Emergency Contacts Fragment)**
*   **الهدف:** إدارة أرقام الطوارئ.
*   **التخطيط (XML Layout):** `ConstraintLayout`
    *   `RecyclerView`: قائمة تعرض جهات الاتصال المضافة (الاسم، الرقم، زر حذف، أيقونة "افتراضي").
    *   `FloatingActionButton`: زر (+) لإضافة جهة اتصال جديدة (يفتح Dialog).
    *   **Dialog إضافة جهة:** يحتوي على `EditText` للاسم، `EditText` للرقم، `EditText` لصلة القرابة.

#### **8. شاشة السجل (History Fragment)**
*   **الهدف:** عرض البلاغات السابقة للمستخدم.
*   **التخطيط (XML Layout):** `LinearLayout`
    *   `RecyclerView`: يعرض بطاقات (Cards). كل بطاقة تحتوي على: تاريخ، نوع البلاغ، الموقع، وحالة البلاغ.

#### **9. شاشة الملف الشخصي (Profile Fragment)**
*   **الهدف:** عرض وتعديل بيانات المستخدم.
*   **التخطيط (XML Layout):** `ScrollView`
    *   `ImageView`: صورة دائرية للمستخدم.
    *   `TextView`: الاسم ورقم الهاتف.
    *   `CardView`: إعدادات التطبيق (تغيير كلمة المرور، تفعيل الإشعارات، تسجيل الخروج).

---

### **رابعاً: واجهات العمليات (Action Screens)**

#### **10. واجهة "وضع الرحلة الآمنة" (Safe Journey Activity)**
*   **الهدف:** تظهر عند تفعيل وضع الرحلة، لتحديد الوجهة ومراقبة الطريق.
*   **التخطيط (XML Layout):** `ConstraintLayout`
    *   **قبل البدء:**
        *   `AutocompleteFragment`: للبحث عن الوجهة (Google Places).
        *   `Button`: "ابدأ الرحلة".
    *   **أثناء الرحلة (تتغير الحالة):**
        *   `TextView`: "جارٍ تتبع رحلتك...".
        *   `TextView`: الوقت المتوقع للوصول.
        *   `Button`: زر كبير "وصلت بأمان" (لإيقاف التتبع).
        *   `Button`: زر أحمر "خطر!" (لتحويل الحالة لطوارئ).

#### **11. واجهة الطوارئ النشطة (SOS Alert Activity)**
*   **الهدف:** تظهر عند ضغط زر الطوارئ أو اكتشاف خطر تلقائي.
*   **التخطيط (XML Layout):** تصميم يوحي بالخطر (خلفية حمراء نابضة).
    *   `TextView`: عداد تنازلي كبير (مثلاً 5 ثواني) قبل إرسال البلاغ (للسماح بالإلغاء في حال الخطأ).
    *   `Button`: "إلغاء - أنا بخير".
    *   `Button`: "إرسال فوراً".
    *   **مخفي (Invisible Views):**
        *   `CameraPreview`: مساحة مخفية لتشغيل الكاميرا والتقاط الصور/الفيديو في الخلفية.
        *   `Chronometer`: لحساب مدة التسجيل الصوتي.

#### **12. واجهة تفاصيل البلاغ (Incident Detail Activity)**
*   **الهدف:** تظهر عند الضغط على بلاغ سابق في السجل.
*   **التخطيط (XML Layout):** `ScrollView`
    *   `MapView`: خريطة مصغرة (Lite Mode) تظهر مكان حدوث البلاغ.
    *   `TextView`: التوقيت والتاريخ.
    *   `TextView`: نوع البلاغ (تحرش، تتبع، الخ..).
    *   `TextView`: الملاحظات المسجلة.
    *   `ImageView` أو `AudioPlayerView`: لعرض الأدلة المرفقة (الصور/الصوت) إن وجدت.

---

### **نصيحة تقنية للتنفيذ:**
في ملفات الـ XML، اعتمد بشكل كبير على **`ConstraintLayout`** كعنصر أب (Parent) لأنه الأفضل للأداء في الأندرويد ولترتيب العناصر المعقدة، واستخدم **`CardView`** لتجميل القوائم والعناصر لجعل التطبيق يبدو حديثاً واحترافياً.
